/**
 * Project 1
 * 
 * Maria Barba
 * 
 * All images are from Adobe Stock : 
 * 
 * Garden Background : https://stock.adobe.com/ca/search?filters%5Bcontent_type%3Aphoto%5D=1&filters%5Bcontent_type%3Aillustration%5D=1&filters%5Bcontent_type%3Azip_vector%5D=1&filters%5Bcontent_type%3Avideo%5D=1&filters%5Bcontent_type%3Atemplate%5D=1&filters%5Bcontent_type%3A3d%5D=1&filters%5Bfetch_excluded_assets%5D=1&filters%5Binclude_stock_enterprise%5D=1&filters%5Bcontent_type%3Aimage%5D=1&k=cartoon+garden&order=relevance&safe_search=1&limit=100&search_page=1&search_type=usertyped&acp=&aco=cartoon+garden&get_facets=0&asset_id=423188914
 * Garden Vegtables : https://stock.adobe.com/ca/search?filters%5Bcontent_type%3Aphoto%5D=1&filters%5Bcontent_type%3Aillustration%5D=1&filters%5Bcontent_type%3Azip_vector%5D=1&filters%5Bcontent_type%3Avideo%5D=1&filters%5Bcontent_type%3Atemplate%5D=1&filters%5Bcontent_type%3A3d%5D=1&filters%5Bfetch_excluded_assets%5D=1&filters%5Binclude_stock_enterprise%5D=1&filters%5Bcontent_type%3Aimage%5D=1&k=cartoon+garden&order=relevance&safe_search=1&limit=100&search_page=1&search_type=usertyped&acp=&aco=cartoon+garden&get_facets=0&asset_id=437675086
 * Growing Plant : https://stock.adobe.com/ca/search?filters%5Bcontent_type%3Aphoto%5D=1&filters%5Bcontent_type%3Aillustration%5D=1&filters%5Bcontent_type%3Azip_vector%5D=1&filters%5Bcontent_type%3Avideo%5D=1&filters%5Bcontent_type%3Atemplate%5D=1&filters%5Bcontent_type%3A3d%5D=1&filters%5Bfetch_excluded_assets%5D=1&filters%5Binclude_stock_enterprise%5D=1&filters%5Bcontent_type%3Aimage%5D=1&k=cartoon+garden&order=relevance&safe_search=1&limit=100&search_page=1&search_type=usertyped&acp=&aco=cartoon+garden&get_facets=0&asset_id=437681195
 * Cartoon Dog : https://stock.adobe.com/ca/search?filters%5Bcontent_type%3Aphoto%5D=1&filters%5Bcontent_type%3Aillustration%5D=1&filters%5Bcontent_type%3Azip_vector%5D=1&filters%5Bcontent_type%3Avideo%5D=1&filters%5Bcontent_type%3Atemplate%5D=1&filters%5Bcontent_type%3A3d%5D=1&filters%5Bfetch_excluded_assets%5D=1&filters%5Binclude_stock_enterprise%5D=1&filters%5Bcontent_type%3Aimage%5D=1&k=cartoon+dog&order=relevance&safe_search=1&limit=100&search_page=1&search_type=usertyped&acp=&aco=cartoon+dog&get_facets=0&asset_id=238060500
 * Fertilizer Icon : https://stock.adobe.com/ca/search?filters%5Bcontent_type%3Aphoto%5D=1&filters%5Bcontent_type%3Aillustration%5D=1&filters%5Bcontent_type%3Azip_vector%5D=1&filters%5Bcontent_type%3Avideo%5D=1&filters%5Bcontent_type%3Atemplate%5D=1&filters%5Bcontent_type%3A3d%5D=1&filters%5Bfetch_excluded_assets%5D=1&filters%5Binclude_stock_enterprise%5D=1&filters%5Bcontent_type%3Aimage%5D=1&k=cartoon+garden+fertilizer&order=relevance&safe_search=1&limit=100&search_page=1&search_type=usertyped&acp=&aco=cartoon+garden+fertilizer&get_facets=0&asset_id=297270529
 * Red Tulip : https://stock.adobe.com/ca/search?filters%5Bcontent_type%3Aphoto%5D=1&filters%5Bcontent_type%3Aillustration%5D=1&filters%5Bcontent_type%3Azip_vector%5D=1&filters%5Bcontent_type%3Avideo%5D=1&filters%5Bcontent_type%3Atemplate%5D=1&filters%5Bcontent_type%3A3d%5D=1&filters%5Bfetch_excluded_assets%5D=1&filters%5Binclude_stock_enterprise%5D=1&filters%5Bcontent_type%3Aimage%5D=1&k=cartoon+tulip+png&order=relevance&safe_search=1&limit=100&search_page=2&search_type=pagination&acp=&aco=cartoon+tulip+png&get_facets=0&asset_id=536612704
 * Watering can : https://stock.adobe.com/ca/search?filters%5Bcontent_type%3Aphoto%5D=1&filters%5Bcontent_type%3Aillustration%5D=1&filters%5Bcontent_type%3Azip_vector%5D=1&filters%5Bcontent_type%3Avideo%5D=1&filters%5Bcontent_type%3Atemplate%5D=1&filters%5Bcontent_type%3A3d%5D=1&filters%5Bfetch_excluded_assets%5D=1&filters%5Binclude_stock_enterprise%5D=1&filters%5Bcontent_type%3Aimage%5D=1&k=gardening+cartoon+png&order=relevance&safe_search=1&limit=100&search_page=1&search_type=usertyped&acp=&aco=gardening+cartoon+png&get_facets=0&asset_id=619860562
 * Flower pot : https://stock.adobe.com/ca/search?filters%5Bcontent_type%3Aphoto%5D=1&filters%5Bcontent_type%3Aillustration%5D=1&filters%5Bcontent_type%3Azip_vector%5D=1&filters%5Bcontent_type%3Avideo%5D=1&filters%5Bcontent_type%3Atemplate%5D=1&filters%5Bcontent_type%3A3d%5D=1&filters%5Bfetch_excluded_assets%5D=1&filters%5Binclude_stock_enterprise%5D=1&filters%5Bcontent_type%3Aimage%5D=1&order=relevance&safe_search=1&limit=100&search_page=1&search_type=see-more&acp=&aco=+cartoon+garden&serie_id=509395505&get_facets=0&asset_id=564351833
 * Main page radio : https://stock.adobe.com/ca/search?filters%5Bcontent_type%3Aphoto%5D=1&filters%5Bcontent_type%3Aillustration%5D=1&filters%5Bcontent_type%3Azip_vector%5D=1&filters%5Bcontent_type%3Avideo%5D=1&filters%5Bcontent_type%3Atemplate%5D=1&filters%5Bcontent_type%3A3d%5D=1&filters%5Bfetch_excluded_assets%5D=1&filters%5Binclude_stock_enterprise%5D=1&filters%5Bcontent_type%3Aimage%5D=1&k=cartoon+png+radio+drawing&order=relevance&safe_search=1&limit=100&search_page=1&search_type=usertyped&acp=&aco=cartoon+png+radio+drawing&get_facets=0&asset_id=569479088
 * 
 * Sounds that are from mixKit :
 * 
 * Dog sniffing sound : https://mixkit.co/free-sound-effects/dog/
 * 
 * Sounds that are from freesound :
 * 
 * Watering plants sound : https://freesound.org/people/Angellu16/sounds/533838/
 * Gardening shovel : https://freesound.org/people/Roulaine/sounds/267974/
 * Digging in a bag of soil : https://freesound.org/people/dhallcomposer/sounds/696531/
 * Singing birds : https://freesound.org/people/MATRIXXX_/sounds/519120/
 * 
 * Fonts from daFont: 
 * 
 * https://www.dafont.com/b-basic-gardening.font
 * https://www.dafont.com/kg-red-hands.font
 * 
 */

"use strict";

//Create a variable which will keep track of the state for which the user is currently is in
let state = `title`;
//Create a fonts object to keep track of used fonts
let fonts = {
    mainMenuFont: null,
    instructionsFont: null,
}
let images = {
    mainBackgroundImg: null,
    wateringCan: null,
    mainPageDog: null,
    mainPage: null,
    mainPageRadio: null,
    pottedPlant: null,
    mainPageRadio: null
}
let sounds = {
    birdsChirping: null,
    dogBark: null,
    dogSniffing: null,
    gardenShovel: null,
    plantsWatering: null
}
let dog = {
    x: 500,
    y: 450,
    width: 220,
    height: 150,
    vx: 0,
    vy: 0,
}
let flowerPot = {
    x: 340,
    y: 350,
    width: 180,
    height: 150
}
let radio = {
    x: 100,
    y: 260,
    width: 150,
    height: 100
}
let mainMenuChoices = {
    play: {
        x: 330,
        y: 350,
        w: 470,
        h: 50
    },
    tutorial: {
        x: 330,
        y: 420,
        w: 470,
        h: 50
    },
    exit: {
        x: 330,
        y: 490,
        w: 470,
        h: 50
    }
}
let radioPageChoices = {
    popMusic: {
        x: 80,
        y: 530,
        w: 150,
        h: 30
    },
    classicMusic: {
        x: 280,
        y: 530,
        w: 150,
        h: 30
    },
    countryMusic: {
        x: 480,
        y: 530,
        w: 150,
        h: 30
    },
    randomMusic: {
        x: 680,
        y: 530,
        w: 150,
        h: 30
    },
    goBack: {
        x: 880,
        y: 530,
        w: 150,
        h: 30
    }
}

/**
 * preload()
 * 
 *This function preloads the images , and the font used 
*/
function preload() {
    images.mainBackgroundImg = loadImage(`./assets/images/mainGarden.jpeg`);
    images.wateringCan = loadImage(`./assets/images/wateringCan.png`);
    images.mainPageDog = loadImage(`./assets/images/sleepingDog.png`);
    images.pottedPlant = loadImage(`./assets/images/pottedSoil.png`);
    images.mainPageRadio = loadImage(`./assets/images/radio.png`);
    fonts.mainMenuFont = loadFont(`./assets/fonts/bBasicGardening.ttf`);
    fonts.instructionsFont = loadFont(`./assets/fonts/KGRedHands.ttf`);
    sounds.birdsChirping = loadSound(`./assets/sounds/birds.wav`);
    sounds.dogBark = loadSound(`./assets/sounds/bark.wav`);
    sounds.dogSniffing = loadSound(`./assets/sounds/dog-sniffing-the-ground.wav`);
    sounds.gardenShovel = loadSound(`./assets/sounds/garden-shovel.wav`);
    sounds.wateringCan = loadSound(`./assets/sounds/watering-plants.wav`);
}
/**
 * setup()
 * 
 * Setup canvas and tcalls the setupObjects function
*/
function setup() {
    createCanvas(1100, 600);
}

/**
 * draw()
 * 
*/
function draw() {
    background(images.mainBackgroundImg);
    if (state == `title`) {
        displayMainMenu();
        if (mouseIsPressed) {
            verifyMenuChoice();
        }
    }
    else if (state == `play`) {
        displayMainGame();
        playBirdsChirping();
        displayMainGameText();
        if (mouseIsPressed) {
            verifyIfDogSelected();
            verifyIfFlowerPotSelected();
            verifyIfRadioSelected();
        }
    }
    else if (state == `playWithDog`) {
        displayPlayDog();
    }
    else if (state == `plantFlowers`) {
        displayPlantFlowers();
    }
    else if (state == `listenRadio`) {

        listenRadio();
    }
    else if (state == `tutorial`) {


    }
    else if (state == `exit`) {

        displayExitText();
    }
}
/**
 * displayMainMenu()
 * 
 * displayMainMenu function displays the main menu text
 * 
*/
function displayMainMenu() {
    displayMenuText();
    displayMenuBoxes();
}
/**
 * displayMenuText()
 * 
 * This function displays the text on the main menu
 */
function displayMenuText() {
    //Blur background image
    filter(BLUR, 2);
    push();
    //Set shadow behind the text
    drawingContext.shadowOffsetX = 2;
    drawingContext.shadowOffsetY = -2;
    drawingContext.shadowBlur = 8;
    drawingContext.shadowColor = 'black';
    //Display watring can image
    image(images.wateringCan, 230, 170, 220, 150);
    //Sets text size, strokeWeight, stroke
    textSize(120);
    strokeWeight(4);
    stroke(34, 78, 5);
    //Set color
    fill(130, 210, 76);
    //Set text font using the saved font
    textFont(fonts.mainMenuFont);
    textAlign(CENTER, CENTER);
    text(`    Gardening \n               Simulator`, width / 2 - 80, 150);
    pop();
}
/**
 * displayMenuBoxes()
 * 
 * This function displays the boxes that the user can select on main menu
 */
function displayMenuBoxes() {
    //Create the menu boxes
    push();
    stroke(34, 78, 5);
    fill(194, 242, 163);
    rect(mainMenuChoices.play.x, mainMenuChoices.play.y, mainMenuChoices.play.w, mainMenuChoices.play.h);
    rect(mainMenuChoices.tutorial.x, mainMenuChoices.tutorial.y, mainMenuChoices.tutorial.w, mainMenuChoices.tutorial.h);
    rect(mainMenuChoices.exit.x, mainMenuChoices.exit.y, mainMenuChoices.exit.w, mainMenuChoices.exit.h);
    pop();
    push();
    textSize(30);
    strokeWeight(4);
    stroke(0);
    //Create a color gradient
    fill(255);
    //Set text font using the saved font
    textFont(fonts.mainMenuFont);
    textAlign(CENTER, CENTER);
    text(`Play`, width / 2, 370);
    text(`Tutorial`, width / 2, 440);
    text(`Exit`, width / 2, 510);
    pop();
}
/**
 * checkPlayChoice()
 * 
 * This function checks if the user has selected the "Play" main menu option
 */
function checkPlayChoice() {
    if (mouseX >= mainMenuChoices.play.x && mouseX <= mainMenuChoices.play.x + mainMenuChoices.play.w && mouseY >= mainMenuChoices.play.y && mouseY <= mainMenuChoices.play.y + mainMenuChoices.play.h) {
        state = `play`;
    }

}
/**
 * checkTutorialChoice()
 * 
 * This function checks if the user has selected the "Tutorial main menu option
 */
function checkTutorialChoice() {
    if (mouseX >= mainMenuChoices.tutorial.x && mouseX <= mainMenuChoices.tutorial.x + mainMenuChoices.tutorial.w && mouseY >= mainMenuChoices.tutorial.y && mouseY <= mainMenuChoices.tutorial.y + mainMenuChoices.tutorial.h) {
        state = `tutorial`;
    }
}
/**
 * checkExitChoice()
 * 
 * This function checks if the user has selected the "Exit" main menu option
 */
function checkExitChoice() {
    if (mouseX >= mainMenuChoices.exit.x && mouseX <= mainMenuChoices.exit.x + mainMenuChoices.exit.w && mouseY >= mainMenuChoices.exit.y && mouseY <= mainMenuChoices.exit.y + mainMenuChoices.exit.h) {
        state = `exit`;
    }
}
/**
 * mouseClicked()
 * 
 * This function checks what choices were chosen by the user from the main menu
 */
function verifyMenuChoice() {
    //Check which choice was selected by the user from the main menu and set that choice in the state
    checkPlayChoice();
    checkTutorialChoice();
    checkExitChoice();
}
/**
 * displayExitText()
 * 
 * This function displays the text that the user will see when the "Exit" option is chosen in the main menu
 */
function displayExitText() {
    //Blur background image
    filter(BLUR, 2);
    push();
    //Set shadow behind the text
    drawingContext.shadowOffsetX = 2;
    drawingContext.shadowOffsetY = -2;
    drawingContext.shadowBlur = 8;
    drawingContext.shadowColor = 'black';
    textSize(80);
    strokeWeight(4);
    stroke(34, 78, 5);
    //Set color
    fill(130, 210, 76);
    //Set text font using the saved font
    textFont(fonts.mainMenuFont);
    textAlign(CENTER, CENTER);
    text(`Thank you for playing .  \n   Come back again !`, width / 2, height / 2);
    pop();
}

/**
 * displayMainGame()
 * 
 * This function displays elments which begins the gardening simulator
 */
function displayMainGame() {
    //Display dog image with shadow effect
    push();
    drawingContext.shadowOffsetX = 2;
    drawingContext.shadowOffsetY = -2;
    drawingContext.shadowBlur = 8;
    drawingContext.shadowColor = 'red';
    image(images.mainPageDog, dog.x, dog.y, dog.width, dog.height);
    pop();
    //Display potted plant image with shadow effect
    push();
    drawingContext.shadowOffsetX = 2;
    drawingContext.shadowOffsetY = -2;
    drawingContext.shadowBlur = 8;
    drawingContext.shadowColor = 'green';
    image(images.pottedPlant, flowerPot.x, flowerPot.y, flowerPot.width, flowerPot.height);
    pop();
    //Display Radio image with shadow effect
    push();
    drawingContext.shadowOffsetX = 2;
    drawingContext.shadowOffsetY = -2;
    drawingContext.shadowBlur = 8;
    drawingContext.shadowColor = 'blue';
    image(images.mainPageRadio, radio.x, radio.y, radio.width, radio.height);
    pop();

}
/**
 * displayMainGameText()
 * 
 * This function displays the text in the main game which explains to the user where to click on to play the game.
 * 
 */
function displayMainGameText() {
    push();
    textSize(17);
    strokeWeight(4);
    noStroke();
    //Create rectangle behind the text
    fill(0, 153, 255);
    // Draw a rectangle 
    rect(50, 50, width - 80, 200, 30);
    //Set color
    stroke(34, 78, 5);
    fill(255, 255, 255);
    //Set text font using the saved font
    textFont(fonts.instructionsFont);
    textAlign(CENTER, CENTER);
    text(`Choose your activity ! You can play with the dog, plant flowers or listen to the radio ! `, width / 2, 100,);
    textAlign(RIGHT);
    text(` 1. To play with the dog, click on the sleeping dog in the garden. `, 795, 130);
    text(`2. To plant flowers, click on the blue flower pot near the gardening bed. `, 890, 160);
    text(`3. To play radio, click on the radio in the garden. `, 665, 190);
    pop();
}

/**
 * verifyIfDogSelected()
 * 
 * This function checks if the user has clicked on the dog in order to change to playWithDog scenario
 */
function verifyIfDogSelected() {
    if (mouseX >= dog.x && mouseX <= dog.x + dog.width && mouseY >= dog.y && mouseY <= dog.y + dog.height) {
        state = `playWithDog`;
    }
}
/**
 * verifyIfFlowerPotSelected()
 * 
 * This function checks if the user has clicked on the flower pot in order to change to the plantFlowers scenario
 */
function verifyIfFlowerPotSelected() {
    if (mouseX >= flowerPot.x && mouseX <= flowerPot.x + flowerPot.width && mouseY >= flowerPot.y && mouseY <= flowerPot.y + flowerPot.height) {
        state = `plantFlowers`;
    }
}
/**
 * verifyIfRadioSelected()
 * 
 * This function checks if the user has clicked on the the radio in order to chnage to the radio scenario
 */
function verifyIfRadioSelected() {
    if (mouseX >= radio.x && mouseX <= radio.x + radio.width && mouseY >= radio.y && mouseY <= radio.y + radio.height) {
        state = `listenRadio`;
    }
}
/**
 * displayPlayDog()
 * 
 * This function displays all the interactions with the dog
 */
function displayPlayDog() {


}
/**
 * displayPlantFlowers()
 * 
 * This function displays all the interactions to plant flowers in the garden
 */
function displayPlantFlowers() {


}
/**
 * listenRadio()
 * 
 * This function displays all the interactions to listen to the radio
 */
function listenRadio() {
    //Draw background of the radio page
    drawRadioPageBackground();
    //Check which music option the player selected


}
/**
 * verifyRadioMusicChoice()
 * 
 * This function verifies which choice the user selected
 */
function verifyRadioMusicChoice() {

}
/**
 * drawRadioPageBackground()
 * 
 * This function draws the background and elements of the radio page
 */
function drawRadioPageBackground() {
    push();
    //Draw gradient background
    let greenBlueGradient = drawingContext.createLinearGradient(50, 50, 350, 400);
    greenBlueGradient.addColorStop(0, 'turquoise');
    greenBlueGradient.addColorStop(.7, 'purple');
    drawingContext.fillStyle = greenBlueGradient;
    drawingContext.rect(0, 0, width, height);
    drawingContext.fill();
    //Create radio buttons to change radio station
    //Pop station
    stroke(255, 255, 255);
    fill(255, 204, 0);
    rect(radioPageChoices.popMusic.x, radioPageChoices.popMusic.y, radioPageChoices.popMusic.w, radioPageChoices.popMusic.h);
    //Classic music station 
    fill(153, 204, 0);
    rect(radioPageChoices.classicMusic.x, radioPageChoices.classicMusic.y, radioPageChoices.classicMusic.w, radioPageChoices.classicMusic.h);
    //Country music station
    fill(255, 51, 0);
    rect(radioPageChoices.countryMusic.x, radioPageChoices.countryMusic.y, radioPageChoices.countryMusic.w, radioPageChoices.countryMusic.h);
    //Random music
    fill(51, 204, 255);
    rect(radioPageChoices.randomMusic.x, radioPageChoices.randomMusic.y, radioPageChoices.randomMusic.w, radioPageChoices.randomMusic.h);
    //Go back
    fill(255, 153, 204);
    rect(radioPageChoices.goBack.x, radioPageChoices.goBack.y, radioPageChoices.goBack.w, radioPageChoices.goBack.h);
    pop();

    //Add text on top of text boxes
    push();
    fill(255);
    //Set text font using the saved font
    textFont(fonts.instructionsFont);
    stroke(0);
    strokeWeight(3);
    textSize(10);
    text(`Pop Music Station - 1`, radioPageChoices.popMusic.x + 5, radioPageChoices.popMusic.y + 15);
    text(`Classical Music Station - 2`, radioPageChoices.classicMusic.x + 5, radioPageChoices.classicMusic.y + 15);
    text(`Country Music Station - 3`, radioPageChoices.countryMusic.x + 5, radioPageChoices.countryMusic.y + 15);
    text(`Random Music Station - 4`, radioPageChoices.randomMusic.x + 5, radioPageChoices.randomMusic.y + 15);
    text(`Go Back - 5`, radioPageChoices.goBack.x + 5, radioPageChoices.goBack.y + 15);
    pop();

}
/**
 * playBirdsChirping()
 * 
 * This function plays the birds sound in a loop in play mode
 */
function playBirdsChirping() {
    if (!sounds.birdsChirping.isPlaying()) {
        sounds.birdsChirping.loop();
    }
}
/**
 * playDogBark()
 * 
 * This function plays the dog barking in loop mode
 */
function playDogBarking() {
    if (!sounds.dogBark.isPlaying()) {
        sounds.dogBark.loop();
    }
}
/**
 * playDogSniffing()
 * 
 * This function plays the dog sniffing in loop mode
 */
function playDogSniffing() {
    if (!sounds.dogSniffing.isPlaying()) {
        sounds.dogSniffing.loop();
    }
}
/**
 * playGardenShovel()
 * 
 * This function plays the garden shoveling in loop mode
 */
function playGardenShovel() {
    if (!sounds.gardenShovel.isPlaying()) {
        sounds.gardenShovel.loop();
    }
}
/**
 * playGardenWatering()
 * 
 * This function plays the sound of the garden being watered
 */
function playGardenWatering() {
    if (!sounds.wateringCan.isPlaying()) {
        sounds.wateringCan.loop();
    }
}